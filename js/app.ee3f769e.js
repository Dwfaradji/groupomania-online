(function(e){function t(t){for(var c,s,a=t[0],i=t[1],l=t[2],b=0,d=[];b<a.length;b++)s=a[b],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],c=!0,a=1;a<n.length;a++){var i=n[a];0!==r[i]&&(c=!1)}c&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var c={},r={app:0},o=[];function s(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=c,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)s.d(n,c,function(t){return e[t]}.bind(null,c));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"08b2":function(e,t,n){e.exports=n.p+"img/icon-left-font-monochrome-black.e0c03c97.svg"},"27bf":function(e,t,n){"use strict";n("5844")},"353e":function(e,t,n){},4455:function(e,t,n){"use strict";n("f7f4")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),r={id:"app"};function o(e,t,n,o,s,a){var i=Object(c["A"])("Header"),l=Object(c["A"])("router-view");return Object(c["t"])(),Object(c["g"])("div",r,[Object(c["j"])(i),Object(c["j"])(l)])}var s=n("08b2"),a=n.n(s),i=function(e){return Object(c["w"])("data-v-18d392e9"),e=e(),Object(c["u"])(),e},l={class:"container-fluid navbar navbar-expand-lg navbar-light bg-light fixed-top px-4"},u=i((function(){return Object(c["h"])("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbar-Toggle","aria-controls":"navbarToggle","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(c["h"])("span",{class:"navbar-toggler-icon"})],-1)})),b=i((function(){return Object(c["h"])("img",{class:"w-50 pl-3 logo_img",src:a.a,alt:"Logo Groupomania"},null,-1)})),d={key:0,class:"collapse navbar-collapse justify-content-start justify-content-md-end",id:"navbar-Toggle"},m={class:"onLine"},p={class:"container__picture__profil"},f=["src"],h=i((function(){return Object(c["h"])("span",{class:"mr-4"},"En ligne",-1)})),j=i((function(){return Object(c["h"])("span",{class:"status_connexion"},null,-1)})),O={class:"navbar-nav mt-2 mt-lg-0"},g={class:"nav-item"},v=Object(c["i"])("Home"),w={class:"nav-item"},y=i((function(){return Object(c["h"])("i",{class:"user-icon fas fa-user"},null,-1)})),k={class:"nav-item"},_=i((function(){return Object(c["h"])("i",{class:"fas fa-sign-out-alt icone_logout"},null,-1)})),P=Object(c["i"])(),C=i((function(){return Object(c["h"])("span",{class:"logout"},"Déconnecter",-1)})),x=[_,P,C];function I(e,t,n,r,o,s){var a=Object(c["A"])("router-link");return Object(c["t"])(),Object(c["g"])("nav",l,[u,Object(c["j"])(a,{class:"navbar-brand",to:"/"},{default:Object(c["G"])((function(){return[b]})),_:1}),-1!==this.$store.state.user.userId?(Object(c["t"])(),Object(c["g"])("div",d,[Object(c["h"])("div",m,[Object(c["h"])("div",p,[Object(c["h"])("img",{class:"image_profil",src:e.user.image,alt:""},null,8,f)]),h,j]),Object(c["h"])("ul",O,[Object(c["h"])("li",g,[Object(c["j"])(a,{class:"nav-link text-dark",to:"/wall"},{default:Object(c["G"])((function(){return[v]})),_:1})]),Object(c["h"])("li",w,[Object(c["j"])(a,{class:"nav-link text-dark","aria-label":"Profile",to:"/profile"},{default:Object(c["G"])((function(){return[y]})),_:1})]),Object(c["h"])("li",k,[Object(c["h"])("button",{type:"button",class:"btn btn-danger btn_logout",onClick:t[0]||(t[0]=function(){return s.logout&&s.logout.apply(s,arguments)})},x)])])])):Object(c["f"])("",!0)])}var S=n("5530"),A=n("5502"),$={props:{msg:String},methods:{logout:function(){console.log("déconnecter"),this.$store.commit("logout"),this.$router.push("/")}},computed:Object(S["a"])({},Object(A["b"])({user:"userInfos"}))},F=(n("6d52"),n("6b0d")),N=n.n(F);const z=N()($,[["render",I],["__scopeId","data-v-18d392e9"]]);var L=z,R={components:{Header:L}};n("4455");const U=N()(R,[["render",o]]);var T=U,V=n("6c02"),D={class:"card"},H={key:0,class:"card__title"},E={key:1,class:"card__title"},M={key:2,class:"card__subtitle"},J=Object(c["i"])(" Tu n'as pas encore de compte ? "),B={key:3,class:"card__subtitle"},G=Object(c["i"])(" Tu as déjà un compte ? "),q={class:"form-row"},W={key:4,class:"form-row"},Q={class:"form-row"},K={key:5,class:"form-row"},X={key:6,class:"form-row"},Y={class:"form-row"},Z={key:0},ee={key:1},te={key:0},ne={key:1};function ce(e,t,n,r,o,s){return Object(c["t"])(),Object(c["g"])("div",D,["login"==e.mode?(Object(c["t"])(),Object(c["g"])("h1",H,"Connexion")):(Object(c["t"])(),Object(c["g"])("h1",E,"Inscription")),"login"==e.mode?(Object(c["t"])(),Object(c["g"])("p",M,[J,Object(c["h"])("span",{class:"card__action",onClick:t[0]||(t[0]=function(e){return s.switchToCreateAccount()})},"Créer un compte")])):(Object(c["t"])(),Object(c["g"])("p",B,[G,Object(c["h"])("span",{class:"card__action",onClick:t[1]||(t[1]=function(e){return s.switchToLogin()})},"Se connecter")])),Object(c["h"])("div",q,[Object(c["H"])(Object(c["h"])("input",{"aria-label":"email","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.email=t}),class:"form-row__input",type:"text",placeholder:"Adresse mail"},null,512),[[c["E"],e.email]])]),"create"==e.mode?(Object(c["t"])(),Object(c["g"])("div",W,[Object(c["H"])(Object(c["h"])("input",{"aria-label":"prenon","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.firstName=t}),class:"form-row__input",type:"text",placeholder:"Prénom"},null,512),[[c["E"],e.firstName]]),Object(c["H"])(Object(c["h"])("input",{"aria-label":"nom","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.lastName=t}),class:"form-row__input",type:"text",placeholder:"Nom"},null,512),[[c["E"],e.lastName]])])):Object(c["f"])("",!0),Object(c["h"])("div",Q,[Object(c["H"])(Object(c["h"])("input",{"aria-label":"mot de passe","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.password=t}),class:"form-row__input",type:"password",placeholder:"Mot de passe"},null,512),[[c["E"],e.password]])]),"login"==e.mode&&"error_login"==e.status?(Object(c["t"])(),Object(c["g"])("div",K," Adresse mail et/ou mot de passe incorrect ")):Object(c["f"])("",!0),"create"==e.mode&&"error_create"==e.status?(Object(c["t"])(),Object(c["g"])("div",X," Erreur de saisie ")):Object(c["f"])("",!0),Object(c["h"])("div",Y,["login"==e.mode?(Object(c["t"])(),Object(c["g"])("button",{key:0,onClick:t[6]||(t[6]=function(e){return s.login()}),class:Object(c["p"])(["button",{"button--disabled":!s.validatedFields}])},["loading"==e.status?(Object(c["t"])(),Object(c["g"])("span",Z,"Connexion en cours....")):(Object(c["t"])(),Object(c["g"])("span",ee," Connexion"))],2)):(Object(c["t"])(),Object(c["g"])("button",{key:1,onClick:t[7]||(t[7]=function(e){return s.createAccount()}),class:Object(c["p"])(["button",{"button--disabled":!s.validatedFields}])},["loading"==e.status?(Object(c["t"])(),Object(c["g"])("span",te,"Inscription en cours....")):(Object(c["t"])(),Object(c["g"])("span",ne," S'inscrire"))],2))])])}var re=n("1da1"),oe=(n("96cf"),{name:"Login",data:function(){return{mode:"login",email:"",firstName:"",lastName:"",password:"",error_password:null,error_email:null}},mounted:function(){-1==this.$store.state.user.userId||this.$router.push("/wall")},computed:Object(S["a"])({validatedFields:function(){return"create"==this.mode?""!=this.email&&""!=this.firstName&&""!=this.lastName&&""!=this.password:""!=this.email&&""!=this.password}},Object(A["b"])(["status"])),methods:{switchToCreateAccount:function(){this.mode="create"},switchToLogin:function(){this.mode="login"},login:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("login",{email:e.email,password:e.password});case 3:window.location.reload(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},createAccount:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,t.prev=1,t.next=4,e.$store.dispatch("createAccount",{email:e.email,lastName:e.lastName,firstName:e.firstName,password:e.password});case 4:n.login(),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),e.error_email="adresse mail invalide",console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}});n("a5de");const se=N()(oe,[["render",ce],["__scopeId","data-v-0f994e34"]]);var ae=se,ie={id:"wall",class:"wall"},le={key:0,class:"row justify-content-center"},ue=Object(c["h"])("p",null,[Object(c["h"])("b",null,"Désolé il n'y a aucune publication pour le moment...")],-1),be=[ue];function de(e,t,n,r,o,s){var a=Object(c["A"])("CreatePost"),i=Object(c["A"])("Post");return Object(c["t"])(),Object(c["g"])("div",ie,[Object(c["j"])(a),0==e.allPosts.length?(Object(c["t"])(),Object(c["g"])("article",le,be)):Object(c["f"])("",!0),(Object(c["t"])(!0),Object(c["g"])(c["a"],null,Object(c["z"])(e.allPosts,(function(e){return Object(c["t"])(),Object(c["e"])(i,{key:e.id,post:e,onCommentCreated:s.loadPosts,onPostDelete:s.loadPosts,onCommentDelete:s.loadPosts,onPostModify:s.loadPosts},null,8,["post","onCommentCreated","onPostDelete","onCommentDelete","onPostModify"])})),128))])}var me=function(e){return Object(c["w"])("data-v-7074b6c9"),e=e(),Object(c["u"])(),e},pe={class:"card card-small"},fe={class:"share-box-inner"},he={class:"profile-thumb"},je={class:"profile-thumb-middle"},Oe=["src"],ge={key:1,src:"https://www.icone-png.com/png/54/53787.png",alt:"...",class:"picture_profile"},ve={class:"share-text-box w-100",method:"post"},we={class:"btn_container"},ye=me((function(){return Object(c["h"])("i",{class:"fas fa-paper-plane"},null,-1)})),ke=[ye],_e=me((function(){return Object(c["h"])("i",{class:"fas fa-camera"},null,-1)})),Pe=[_e],Ce={key:0},xe={key:0,class:"view-picture"},Ie=["src"];function Se(e,t,n,r,o,s){return Object(c["t"])(),Object(c["g"])("div",null,[Object(c["h"])("div",pe,[Object(c["h"])("div",fe,[Object(c["h"])("div",he,[Object(c["h"])("figure",je,[e.user.image?(Object(c["t"])(),Object(c["g"])("img",{key:0,src:e.user.image,alt:"image de l'utilisateur",class:"picture_profile"},null,8,Oe)):(Object(c["t"])(),Object(c["g"])("img",ge))])]),Object(c["h"])("form",ve,[Object(c["H"])(Object(c["h"])("textarea",{onInput:t[0]||(t[0]=function(){return s.staticText&&s.staticText.apply(s,arguments)}),"aria-label":"contenue",class:"share-text-field","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.content=e}),placeholder:"Quoi de neuf ?",rows:"2",cols:"60"},"\n          ",544),[[c["E"],o.content]]),Object(c["h"])("div",we,[Object(c["h"])("button",{name:"post",type:"submit",class:"btn-share",onClick:t[2]||(t[2]=Object(c["I"])((function(){return s.createPost&&s.createPost.apply(s,arguments)}),["prevent"]))},ke),Object(c["h"])("button",{class:"btn-share btn-image",name:"image",onClick:t[3]||(t[3]=Object(c["I"])((function(t){return e.$refs.fileInput.click()}),["prevent"]))},Pe),Object(c["h"])("input",{"aria-label":"choisir une image",style:{display:"none"},ref:"fileInput",name:"inputFile",id:"inputFile",type:"file",class:"button",onChange:t[4]||(t[4]=function(){return s.onFileSelected&&s.onFileSelected.apply(s,arguments)})},null,544)])])]),Object(c["j"])(c["b"],{class:"text-center text-danger alert",name:"fade"},{default:Object(c["G"])((function(){return[o.alert?(Object(c["t"])(),Object(c["g"])("p",Ce,Object(c["C"])(o.alert),1)):Object(c["f"])("",!0)]})),_:1}),o.addPicturePost?(Object(c["t"])(),Object(c["g"])("div",xe,[Object(c["h"])("img",{src:o.addPicturePost,alt:"",class:"picture_post"},null,8,Ie)])):Object(c["f"])("",!0)])])}n("e9c4");var Ae={name:"Create",data:function(){return{id:this.id,title:"",content:"",image:"",alert:null,visible:!1,filesPicture:null,addPicturePost:null}},computed:Object(S["a"])({},Object(A["b"])({user:"userInfos"})),methods:{onFileSelected:function(e){var t=this;this.filesPicture=e.target.files[0];var n=new FileReader;n.readAsDataURL(this.filesPicture),n.onload=function(e){t.addPicturePost=e.target.result;var n=e.target.result;localStorage.setItem("images",JSON.stringify(n))},console.log(this.addPicturePost,"test")},createPost:function(){var e=new FormData;e.append("content",this.content),e.append("title",this.title),null!==this.filesPicture&&e.append("image",this.filesPicture),""!==this.content?(this.$store.dispatch("createPost",e),localStorage.removeItem("content"),localStorage.removeItem("images"),this.title="",this.content="",this.filesPicture="",this.addPicturePost="",this.alert=""):this.alert="Veuillez remplir les champs"},staticText:function(e){var t=e.target.value;localStorage.setItem("content",JSON.stringify(t))}},mounted:function(){var e=localStorage.getItem("content"),t=localStorage.getItem("images"),n=JSON.parse(t),c=JSON.parse(e);this.addPicturePost=n,this.content=c,this.$store.dispatch("getUserInfos")}};n("d365");const $e=N()(Ae,[["render",Se],["__scopeId","data-v-7074b6c9"]]);var Fe=$e,Ne=function(e){return Object(c["w"])("data-v-7451e81e"),e=e(),Object(c["u"])(),e},ze={class:"card"},Le={class:"post-title d-flex align-items-center"},Re=Ne((function(){return Object(c["h"])("div",{class:"profile-thumb"},[Object(c["h"])("figure",{class:"profile-thumb-middle"},[Object(c["h"])("img",{src:"https://www.icone-png.com/png/54/53787.png",alt:""})])],-1)})),Ue={class:"posted-autor"},Te={class:"author"},Ve={href:""},De={class:"post-time"},He={key:0,class:"post-settings-bar"},Ee=Ne((function(){return Object(c["h"])("span",null,null,-1)})),Me=Ne((function(){return Object(c["h"])("span",null,null,-1)})),Je=Ne((function(){return Object(c["h"])("span",null,null,-1)})),Be={class:"post-settings arrow-shape"},Ge={class:"post-content"},qe={class:"post-desc"},We={key:0,class:"post-thumb-gallery"},Qe={class:"post-thumb img-popup"},Ke=["src"],Xe={class:"post-meta"},Ye=Ne((function(){return Object(c["h"])("div",{class:"heart"},[Object(c["h"])("i",{class:"far fa-heart heart noLike icone_size"}),Object(c["h"])("i",{class:"fas fa-heart heart like icone_size"})],-1)})),Ze=[Ye],et={class:"comment-share-meta"},tt=Ne((function(){return Object(c["h"])("i",{class:"fab fa-rocketchat mr-1 icone_size"},null,-1)})),nt={key:0,class:"number_comment"},ct={method:"post"},rt={class:"container"},ot={key:0},st={class:"container d-flex justify-content-between pl-0"},at=Object(c["i"])("écrit par "),it=["onClick"],lt=Ne((function(){return Object(c["h"])("i",{class:"fas fa-times"},null,-1)})),ut=[lt],bt={class:"container_up_comment"},dt=Ne((function(){return Object(c["h"])("i",{class:"fas fa-chevron-circle-up"},null,-1)})),mt=[dt],pt={class:"row justify-content-around align-items-center comment_bloc"},ft=Ne((function(){return Object(c["h"])("i",{class:"fas fa-paper-plane"},null,-1)})),ht=[ft],jt={key:0,class:"text-center text-danger alert_text"};function Ot(e,t,n,r,o,s){return Object(c["t"])(),Object(c["g"])("div",ze,[Object(c["h"])("div",Le,[Re,Object(c["h"])("div",Ue,[Object(c["h"])("h6",Te,[Object(c["h"])("a",Ve,Object(c["C"])(n.post.User.firstName),1)]),Object(c["h"])("span",De,"le "+Object(c["C"])(s.dateFormat(n.post.createdAt))+" à "+Object(c["C"])(s.hourFormat(n.post.createdAt)),1)]),n.post.user_id==o.userStore||o.isAdmin?(Object(c["t"])(),Object(c["g"])("div",He,[Ee,Me,Je,Object(c["h"])("div",Be,[Object(c["h"])("ul",null,[Object(c["h"])("li",null,[n.post.user_id==o.userStore?(Object(c["t"])(),Object(c["g"])("button",{key:0,class:"dropdown-item",onClick:t[0]||(t[0]=Object(c["I"])((function(e){return s.modifyPost()}),["prevent"]))}," Modifier ")):Object(c["f"])("",!0)]),Object(c["h"])("li",null,[Object(c["h"])("button",{class:"dropdown-item",onClick:t[1]||(t[1]=Object(c["I"])((function(e){return s.deletePost()}),["prevent"]))}," Supprimer ")])])])])):Object(c["f"])("",!0)]),Object(c["h"])("div",Ge,[Object(c["h"])("p",qe,Object(c["C"])(n.post.content),1),n.post.image?(Object(c["t"])(),Object(c["g"])("div",We,[Object(c["h"])("figure",Qe,[Object(c["h"])("img",{src:n.post.image,alt:""},null,8,Ke)])])):Object(c["f"])("",!0),Object(c["h"])("div",Xe,[Object(c["h"])("button",{class:"post-metta-like",onClick:t[2]||(t[2]=function(){return s.postLike&&s.postLike.apply(s,arguments)})},Ze),Object(c["h"])("ul",et,[Object(c["h"])("li",null,[Object(c["h"])("button",{onClick:t[3]||(t[3]=Object(c["I"])((function(){return s.toggleComments&&s.toggleComments.apply(s,arguments)}),["prevent"]))},[tt,0!=n.post.Comments.length?(Object(c["t"])(),Object(c["g"])("span",nt,Object(c["C"])(n.post.Comments.length),1)):Object(c["f"])("",!0)])])])])]),Object(c["h"])("div",null,[Object(c["h"])("div",null,[Object(c["h"])("form",ct,[Object(c["h"])("div",rt,[Object(c["h"])("div",null,[Object(c["h"])("p",null,Object(c["C"])(n.post.Comments.content),1),o.isDisplay?(Object(c["t"])(),Object(c["g"])("article",ot,[(Object(c["t"])(!0),Object(c["g"])(c["a"],null,Object(c["z"])(n.post.Comments,(function(e,t){return Object(c["t"])(),Object(c["g"])("div",{key:t,class:"comment m-2"},[Object(c["h"])("p",st,[Object(c["h"])("span",null,[at,Object(c["h"])("b",null,Object(c["C"])(e.User.firstName),1),Object(c["i"])(" le "+Object(c["C"])(s.dateFormat(e.createdAt))+" à "+Object(c["C"])(s.hourFormat(e.createdAt)),1)]),e.user_id==o.userStore||o.isAdmin?(Object(c["t"])(),Object(c["g"])("button",{key:0,onClick:Object(c["I"])((function(e){return s.deleteComment(t)}),["prevent"]),class:"btn comment_delete"},ut,8,it)):Object(c["f"])("",!0)]),Object(c["h"])("p",null,[Object(c["h"])("b",null,Object(c["C"])(e.content),1)])])})),128)),Object(c["h"])("div",bt,[n.post.Comments.length?(Object(c["t"])(),Object(c["g"])("button",{key:0,onClick:t[4]||(t[4]=function(){return s.toggleComments&&s.toggleComments.apply(s,arguments)}),class:"btn up_comment"},mt)):Object(c["f"])("",!0)])])):Object(c["f"])("",!0)])]),Object(c["h"])("div",pt,[Object(c["H"])(Object(c["h"])("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.commentaire=e}),class:"form-control m-3 col-md-8","aria-label":"commenter",placeholder:"Ecrire un commentaire"},null,512),[[c["E"],o.commentaire]]),Object(c["h"])("div",null,[Object(c["h"])("button",{type:"submit",class:"btn btn-danger p-2 btn_send_coment",onClick:t[6]||(t[6]=Object(c["I"])((function(){return s.sendComment&&s.sendComment.apply(s,arguments)}),["prevent"]))},ht)])]),Object(c["j"])(c["b"],{name:"fade"},{default:Object(c["G"])((function(){return[s.sendComment?(Object(c["t"])(),Object(c["g"])("p",jt,Object(c["C"])(o.alert),1)):Object(c["f"])("",!0)]})),_:1})])])])])}var gt=n("2909"),vt=(n("99af"),n("d3b7"),n("bc3a")),wt=n.n(vt),yt=wt.a.create({baseURL:"https://groupomania-by-faradji.herokuapp.com/api/"}),kt=localStorage.getItem("user"),_t={userId:-1,token:""};if(kt)try{Pt=JSON.parse(kt),yt.defaults.headers.common["Authorization"]="Bearer "+Pt.token}catch(mn){Pt=_t}else var Pt=_t;var Ct=Object(A["a"])({state:{status:"",user:Pt,userInfos:{id:"",email:"",firstName:"",lastName:"",image:""},post:{},posts:[]},getters:{post:function(e){return e.post},posts:function(e){return e.posts}},mutations:{addPost:function(e,t){e.post=[t].concat(Object(gt["a"])(e.posts))},getPosts:function(e,t){e.posts=t},setStatus:function(e,t){e.status=t},logUser:function(e,t){yt.defaults.headers.common["Authorization"]="Bearer "+t.token,localStorage.setItem("user",JSON.stringify(t)),e.user=t},userInfos:function(e,t){e.userInfos=t},logout:function(e){e.user=_t,localStorage.removeItem("user")}},actions:{login:function(e,t){var n=e.commit;return n("setStatus","loading"),new Promise((function(e,c){yt.post("auth/login",t).then((function(t){n("setStatus",""),n("logUser",t.data),e(t)})).catch((function(e){n("setStatus","error_login"),c(e)}))}))},createAccount:function(e,t){var n=e.commit;return n("setStatus","loading"),new Promise((function(e,c){yt.post("/auth/signup",t).then((function(t){yt.defaults.headers.common["Authorization"]="Bearer "+Pt.token,n("setStatus","created"),e(t)})).catch((function(e){n("setStatus","error_create"),c(e)}))}))},getUserInfos:function(e){var t=e.commit;yt.get("/auth/profile").then((function(e){t("userInfos",e.data)})).catch((function(e){}))},createComment:function(e,t){var n=e.commit;return new Promise((function(e,c){yt.post("/comments/",t).then((function(t){n("setStatus",t.data),e(t)})).catch((function(e){c(e)}))}))},getAllPosts:function(e){var t=e.commit;yt.get("/posts/allpost").then((function(e){t("getPosts",e.data)})).catch((function(e){}))},createPost:function(e,t){var n=e.commit;return new Promise((function(e,c){yt.post("posts/post",t).then((function(t){var c=t.data;n("addPost",c),e(t)})).then((function(){yt.get("/posts/allpost").then((function(e){var t=e.data;n("getPosts",t)}))})).catch((function(e){c(e)}))}))}}}),xt={name:"Post",computed:Object(S["a"])({},Object(A["b"])({user:"userInfos"})),props:{post:{type:Object,required:!0}},data:function(){return{isAdmin:!0,userStore:this.$store.state.user.userId,id_param:this.post.id,commentaire:"",isDisplay:!1,alert:"",countLikes:0}},mounted:function(){this.userStore=this.$store.state.user.userId,this.isAdmin=this.$store.state.user.isAdmin},methods:{postLike:function(){switch(this.countLikes){case 0:this.countLikes++,document.querySelector(".like").style="color : #dc4734";break;case 1:this.countLikes--,document.querySelector(".like").style="color : transparent"}},modifyPost:function(){this.$router.push("/modifypost/".concat(this.id_param))},toggleComments:function(){this.isDisplay=!this.isDisplay},sendComment:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.commentaire){t.next=8;break}return t.next=3,e.$store.dispatch("createComment",{content:e.commentaire,post_id:e.post.id});case 3:e.commentaire="",e.alert="",e.$emit("comment-created"),t.next=9;break;case 8:e.alert="Veuillez remplir les champs";case 9:case"end":return t.stop()}}),t)})))()},dateFormat:function(e){var t=new Date(e),n={day:"numeric",month:"numeric",year:"numeric"};return t.toLocaleDateString("fr-FR",n)},hourFormat:function(e){var t=new Date(e),n={hour:"numeric",minute:"numeric",second:"numeric"};return t.toLocaleTimeString("fr-FR",n)},deletePost:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$store.state.user.token,t.prev=1,1!=confirm("Voulez-vous vraiment supprimer le post")){t.next=8;break}return yt.defaults.headers.common["Authorization"]="Bearer "+n,t.next=6,yt.delete("/posts/".concat(e.id_param));case 6:alert("La suppression du post est bien prise en compte"),e.$emit("post-delete",{post:e.post.id});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),alert("Vous ne pouvez pas supprimez ce post");case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},deleteComment:function(e){var t=this;return Object(re["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(c=t.$store.state.user.token,n.prev=1,yt.defaults.headers.common["Authorization"]="Bearer "+c,1!=confirm("Voulez-vous vraiment supprimer ce commentaire")){n.next=8;break}return n.next=6,yt.delete("/comments/delete/".concat(t.post.Comments[e].id));case 6:alert("La suppression du commentaire est bien prise en compte"),t.$emit("comment-delete");case 8:n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),alert("Vous ne pouvez pas supprimez ce commentaire");case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()}}};n("27bf");const It=N()(xt,[["render",Ot],["__scopeId","data-v-7451e81e"]]);var St=It,At={name:"Wall",components:{CreatePost:Fe,Post:St},data:function(){return{post:{id:"",content:"",image:""}}},computed:Object(S["a"])({},Object(A["b"])({allPosts:"posts"})),methods:{loadPosts:function(){this.$store.dispatch("getAllPosts")}},mounted:function(){-1!=this.$store.state.user.userId?this.loadPosts():this.$router.push("/")}};n("c7ff");const $t=N()(At,[["render",de]]);var Ft=$t,Nt=function(e){return Object(c["w"])("data-v-30c5eec4"),e=e(),Object(c["u"])(),e},zt={class:"card"},Lt=Nt((function(){return Object(c["h"])("h1",{class:"card__title"},"Votre profil",-1)})),Rt=Nt((function(){return Object(c["h"])("p",{class:"card__subtitle"},"Voilà donc qui je suis...",-1)})),Ut={class:"row justify-content-center"},Tt={class:""},Vt={class:"col-sm"},Dt={class:""},Ht={key:0,class:"media profile"},Et=["src"],Mt={class:"col-sm"},Jt=Nt((function(){return Object(c["h"])("strong",null,"Infos utilisateur: ",-1)})),Bt=Nt((function(){return Object(c["h"])("strong",null," E-mail:",-1)})),Gt={class:"form-row"};function qt(e,t,n,r,o,s){return Object(c["t"])(),Object(c["g"])("div",zt,[Lt,Rt,Object(c["h"])("div",Ut,[Object(c["h"])("div",Tt,[Object(c["h"])("div",Vt,[Object(c["h"])("div",Dt,[e.user.image?(Object(c["t"])(),Object(c["g"])("div",Ht,[Object(c["h"])("img",{src:e.user.image,alt:"image de l'utilisateur",class:"rounded-circle align-self-center mr-3"},null,8,Et)])):Object(c["f"])("",!0),Object(c["h"])("button",{class:"button m-2",name:"image",onClick:t[0]||(t[0]=function(t){return e.$refs.fileInput.click()})}," Choisir une image "),Object(c["h"])("button",{class:"button m-2",name:"image",onClick:t[1]||(t[1]=Object(c["I"])((function(e){return s.onUploadImage()}),["prevent"]))}," Télécharger "),Object(c["h"])("input",{"aria-label":"choisir une image",style:{display:"none"},ref:"fileInput",name:"inputFile",id:"inputFile",type:"file",class:"button",onChange:t[2]||(t[2]=function(){return s.onFileSelected&&s.onFileSelected.apply(s,arguments)})},null,544)])]),Object(c["h"])("div",Mt,[Object(c["h"])("p",null,[Jt,Object(c["i"])(Object(c["C"])(e.user.firstName)+" "+Object(c["C"])(e.user.lastName),1)]),Object(c["h"])("p",null,[Bt,Object(c["i"])(" "+Object(c["C"])(e.user.email),1)])])])]),Object(c["h"])("div",Gt,[Object(c["h"])("button",{onClick:t[3]||(t[3]=function(e){return s.deleteUser()}),class:"button"},"Supprimer le compte")])])}n("b0c0");var Wt={name:"Profile",data:function(){return{selectedFile:null,previewImage:null,image:null}},mounted:function(){-1!=this.$store.state.user.userId?this.$store.dispatch("getUserInfos"):this.$router.push("/")},computed:Object(S["a"])({},Object(A["b"])({user:"userInfos"})),methods:{onFileSelected:function(e){var t=this;this.selectedFile=e.target.files[0];var n=new FileReader;n.readAsDataURL(this.selectedFile),n.onload=function(e){t.previewImage=e.target.result}},onUploadImage:function(){var e=this.$store.state.user.userId,t=this.$store.state.user.token,n=new FormData;n.append("image",this.selectedFile,this.selectedFile.name),yt.defaults.headers.common["Authorization"]="Bearer "+t,yt.post("/auth/photo/".concat(e),n).then((function(e){console.log(e,"image "),window.location.reload()}))},deleteUser:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.$store.state.user.userId,c=e.$store.state.user.token,console.log(c,"Token"),1!=confirm("Voulez-vous vraiment supprimer cet utilisateur")){t.next=12;break}return yt.defaults.headers.common["Authorization"]="Bearer "+c,t.next=8,yt.delete("/auth/".concat(n));case 8:alert("La suppression de l'utilisateur a bien été pris en compte"),localStorage.removeItem("user"),window.location.reload(),e.$router.go("/");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),alert("La suppression de l'utilisateur a bien été pris en compte");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()}}};n("a288");const Qt=N()(Wt,[["render",qt],["__scopeId","data-v-30c5eec4"]]);var Kt=Qt,Xt=function(e){return Object(c["w"])("data-v-8191e52c"),e=e(),Object(c["u"])(),e},Yt={class:"container col-6 cardbox shadow-lg bg-white border border-danger mt-5 container-box"},Zt=Xt((function(){return Object(c["h"])("label",{for:"titre"},"Titre",-1)})),en=Xt((function(){return Object(c["h"])("label",{for:"message"},"Message",-1)})),tn={class:"text-center m-2 col-xs-8"},nn={class:"lien"},cn={class:"button lien"},rn=Object(c["i"])("Retour au post");function on(e,t,n,r,o,s){var a=Object(c["A"])("HeaderProfile"),i=Object(c["A"])("router-link");return Object(c["t"])(),Object(c["g"])("div",null,[Object(c["j"])(a),Object(c["h"])("section",Yt,[Object(c["h"])("form",null,[Object(c["h"])("ul",null,[Object(c["h"])("li",null,[Zt,Object(c["H"])(Object(c["h"])("input",{class:"container border border-danger",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.post.title=e}),placeholder:"Titre",size:"50",required:""},null,512),[[c["E"],o.post.title]])]),Object(c["h"])("li",null,[en,Object(c["H"])(Object(c["h"])("textarea",{class:"container border border-danger","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.post.content=e}),placeholder:"Contenu",rows:"10",cols:"60",required:""},null,512),[[c["E"],o.post.content]])])])]),Object(c["h"])("div",tn,[Object(c["h"])("div",nn,[Object(c["h"])("button",{onClick:t[2]||(t[2]=function(e){return s.modifyPost()}),class:"button mb-2"}," Modifier le post ")]),Object(c["h"])("div",cn,[Object(c["j"])(i,{to:"/wall/",class:"lien"},{default:Object(c["G"])((function(){return[rn]})),_:1})])])])])}var sn={name:"modifypost",components:{HeaderProfile:L},data:function(){return{id_param:this.$route.params.id,post:{title:"",content:""}}},methods:{modifyPost:function(){var e=this;return Object(re["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.post,t.prev=1,""===e.post.title&&""===e.post.content){t.next=9;break}if(1!=confirm("Voulez-vous vraiment modifier ce post")){t.next=9;break}return t.next=6,yt.put("posts/".concat(e.id_param),n);case 6:alert("Votre modification est bien prise en compte"),e.$emit("post-modify"),e.$router.push("/wall");case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),alert("Vous ne pouvez pas modifier ce commentaire");case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()}}};n("92ae");const an=N()(sn,[["render",on],["__scopeId","data-v-8191e52c"]]);var ln=an,un=[{path:"/",name:"Login",components:{default:ae},meta:{title:"Se connecter"}},{path:"/wall",name:"Wall",components:{default:Ft},meta:{title:"Mur"}},{path:"/profile",name:"Profile",components:{default:Kt},meta:{title:"Profile"}},{path:"/modifypost/:id",name:"ModifyPost",component:ln}],bn=Object(V["a"])({history:Object(V["b"])(""),routes:un}),dn=bn;Object(c["d"])(T).use(Ct).use(dn).mount("#app");t["default"]={router:dn,store:Ct}},5844:function(e,t,n){},"6d52":function(e,t,n){"use strict";n("bccc")},"730c":function(e,t,n){},"8f65":function(e,t,n){},"92ae":function(e,t,n){"use strict";n("b496")},a288:function(e,t,n){"use strict";n("730c")},a31f:function(e,t,n){},a5de:function(e,t,n){"use strict";n("a31f")},b496:function(e,t,n){},bccc:function(e,t,n){},c7ff:function(e,t,n){"use strict";n("353e")},d365:function(e,t,n){"use strict";n("8f65")},f7f4:function(e,t,n){}});
//# sourceMappingURL=app.ee3f769e.js.map